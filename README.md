Node Gallery
============

NodeJS Photo Gallery built on Express 4.  
Feed it a directory of photos, get back a JSON object & a styled photo gallery ready for the web.  

* No database needed
* Strictly no frills
* Folders titles => Album titles
* Image titles => Photo Titles
* EXIF title => Description
* Displays camera capture info (exposure, aperture, ISO..)

Installation
============

    $ npm install --save node-gallery
    
Usage    
=====
Node gallery can be used standalone, or in an existing node.js application. The example code has support for the Openshift and Heroku PaaS. 
## Standalone
Node Gallery supports deploys to OpenShift and Heroku out of the box.
Modify [examples/app.js](examples/app.js) to your liking, add your albums & images to `resources/photos` & run using:
    
	node example/app.js

## In Existing Applications
Node Gallery exposes express style middleware, meaning it can be mounted to any route within your application.

    /*
    @param {string} staticFiles The directory where your album starts - can contain photos or images
    @param {string} urlRoot The root URL which you pass into the epxress router in app.use (no way of obtaining this otherwise)
    @param {string} title Yup, you guessed it - the title to display on the root gallery
    */
    app.use('/gallery', require('node-gallery')({
      staticFiles : 'resources/photos',
      urlRoot : 'gallery', 
      title : 'Example Gallery'
    }).middleware);

Now, you can access the gallery by going to your application's url /gallery - in the case of our example, http://localhost:3000/gallery. 

### Middleware Views
The middleware renders the views in the `views` directory, but you can override these. `//TODO: How?`

### Middleware Routes
There are three main routes exposed under whatever root directory you provide.  

#### JSON Responses
For albums and photos, to receive a JSON response rather than a rendered HTML page, just send an `accept: application/json` header.

**Album Pages**  

    /:albumName/      
    /:albumName/:subalbum  
    /:albumName/:subalbum/:anothersubalbum  


**Photo Pages**  
    
    /:albumName/photo/:photoName
    /:albumName/:subalbum/photo/:photoName
    
**Image Files**  
    
    /:albumName/:subAlbum/:photoname.(png|jpg|tif|jpeg|gif)
    
Examples
===================
Node Gallery with out-of-the-box configuration is deployed to Heroku - [see it here.  ](http://nodegallery.herokuapp.com/gallery)

A usage example using node-gallery with Express can be found in [examples/app.js](examples/app.js).

Photos
===================
Photos are added to your specified `staticFiles` directory. Albums are created for every folder we encounter, and thumbnails are automatically generated by using the first image we come across in this album.  

Tests
============
Tests are written in raw javascript. To run,

    $ npm test

ImageMagick
===========
Node Gallery does require ImageMagick. Installation instructions for mac can be found at: http://www.imagemagick.org/script/binary-releases.php#macosx  
  
For windows:

1. Select imagemagick installer for your system, e.g., http://sourceforge.net/projects/imagemagick/files/6.8.9-exes/ImageMagick-6.8.9-4-Q16-x64-dll.exe/download
2. Install imagemagick
3. Make sure that imagemagick tools are available on system path (e.g., you can test if you can run "convert.exe" from CMD)
4. Restart cygwin, CMD or whatever you use to fire up node.js
